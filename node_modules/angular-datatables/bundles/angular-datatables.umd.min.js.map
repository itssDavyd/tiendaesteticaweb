{"version":3,"file":"angular-datatables.umd.min.js","sources":["../src/angular-datatables.directive.js","../src/angular-datatables.module.js"],"sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/**\n * @license\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://raw.githubusercontent.com/l-lin/angular-datatables/master/LICENSE\n */\nimport { Directive, ElementRef, Input, Renderer2, ViewContainerRef } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nvar DataTableDirective = /** @class */ (function () {\n    function DataTableDirective(el, vcr, renderer) {\n        this.el = el;\n        this.vcr = vcr;\n        this.renderer = renderer;\n        /**\n         * The DataTable option you pass to configure your table.\n         */\n        this.dtOptions = {};\n    }\n    DataTableDirective.prototype.ngOnInit = function () {\n        var _this = this;\n        if (this.dtTrigger) {\n            this.dtTrigger.subscribe(function (options) {\n                _this.displayTable(options);\n            });\n        }\n        else {\n            this.displayTable(null);\n        }\n    };\n    DataTableDirective.prototype.ngOnDestroy = function () {\n        if (this.dtTrigger) {\n            this.dtTrigger.unsubscribe();\n        }\n        if (this.dt) {\n            this.dt.destroy(true);\n        }\n    };\n    DataTableDirective.prototype.displayTable = function (dtOptions) {\n        var _this = this;\n        // assign new options if provided\n        if (dtOptions) {\n            this.dtOptions = dtOptions;\n        }\n        this.dtInstance = new Promise(function (resolve, reject) {\n            Promise.resolve(_this.dtOptions).then(function (resolvedDTOptions) {\n                // validate object\n                var isTableEmpty = Object.keys(resolvedDTOptions).length === 0 && $('tbody tr', _this.el.nativeElement).length === 0;\n                if (isTableEmpty) {\n                    reject('Both the table and dtOptions cannot be empty');\n                    return;\n                }\n                // Set a column unique\n                if (resolvedDTOptions.columns) {\n                    resolvedDTOptions.columns.forEach(function (col) {\n                        var _a;\n                        if (((_a = col.id) !== null && _a !== void 0 ? _a : '').trim() === '') {\n                            col.id = _this.getColumnUniqueId();\n                        }\n                    });\n                }\n                // Using setTimeout as a \"hack\" to be \"part\" of NgZone\n                setTimeout(function () {\n                    // Assign DT properties here\n                    var options = {\n                        rowCallback: function (row, data, index) {\n                            if (resolvedDTOptions.columns) {\n                                var columns = resolvedDTOptions.columns;\n                                _this.applyNgPipeTransform(row, columns);\n                                _this.applyNgRefTemplate(row, columns, data);\n                            }\n                            // run user specified row callback if provided.\n                            if (resolvedDTOptions.rowCallback) {\n                                resolvedDTOptions.rowCallback(row, data, index);\n                            }\n                        }\n                    };\n                    // merge user's config with ours\n                    options = Object.assign({}, resolvedDTOptions, options);\n                    _this.dt = $(_this.el.nativeElement).DataTable(options);\n                    resolve(_this.dt);\n                });\n            });\n        });\n    };\n    DataTableDirective.prototype.applyNgPipeTransform = function (row, columns) {\n        // Filter columns with pipe declared\n        var colsWithPipe = columns.filter(function (x) { return x.ngPipeInstance && !x.ngTemplateRef; });\n        colsWithPipe.forEach(function (el) {\n            var pipe = el.ngPipeInstance;\n            var pipeArgs = el.ngPipeArgs || [];\n            // find index of column using `data` attr\n            var i = columns.filter(function (c) { return c.visible !== false; }).findIndex(function (e) { return e.id === el.id; });\n            // get <td> element which holds data using index\n            var rowFromCol = row.childNodes.item(i);\n            // Transform data with Pipe and PipeArgs\n            var rowVal = $(rowFromCol).text();\n            var rowValAfter = pipe.transform.apply(pipe, __spreadArray([rowVal], pipeArgs, false));\n            // Apply transformed string to <td>\n            $(rowFromCol).text(rowValAfter);\n        });\n    };\n    DataTableDirective.prototype.applyNgRefTemplate = function (row, columns, data) {\n        var _this = this;\n        // Filter columns using `ngTemplateRef`\n        var colsWithTemplate = columns.filter(function (x) { return x.ngTemplateRef && !x.ngPipeInstance; });\n        colsWithTemplate.forEach(function (el) {\n            var _a = el.ngTemplateRef, ref = _a.ref, context = _a.context;\n            // get <td> element which holds data using index\n            var i = columns.filter(function (c) { return c.visible !== false; }).findIndex(function (e) { return e.id === el.id; });\n            var cellFromIndex = row.childNodes.item(i);\n            // reset cell before applying transform\n            $(cellFromIndex).html('');\n            // render onto DOM\n            // finalize context to be sent to user\n            var _context = Object.assign({}, context, context === null || context === void 0 ? void 0 : context.userData, {\n                adtData: data\n            });\n            var instance = _this.vcr.createEmbeddedView(ref, _context);\n            _this.renderer.appendChild(cellFromIndex, instance.rootNodes[0]);\n        });\n    };\n    DataTableDirective.prototype.getColumnUniqueId = function () {\n        var result = '';\n        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        for (var i = 0; i < 6; i++) {\n            var randomIndex = Math.floor(Math.random() * characters.length);\n            result += characters.charAt(randomIndex);\n        }\n        return result.trim();\n    };\n    DataTableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: DataTableDirective, deps: [{ token: i0.ElementRef }, { token: i0.ViewContainerRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Directive });\n    DataTableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"17.0.2\", type: DataTableDirective, selector: \"[datatable]\", inputs: { dtOptions: \"dtOptions\", dtTrigger: \"dtTrigger\" }, ngImport: i0 });\n    return DataTableDirective;\n}());\nexport { DataTableDirective };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: DataTableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[datatable]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.ViewContainerRef }, { type: i0.Renderer2 }]; }, propDecorators: { dtOptions: [{\n                type: Input\n            }], dtTrigger: [{\n                type: Input\n            }] } });\n//# sourceMappingURL=angular-datatables.directive.js.map","/**\n * @license\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://raw.githubusercontent.com/l-lin/angular-datatables/master/LICENSE\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DataTableDirective } from './angular-datatables.directive';\nimport * as i0 from \"@angular/core\";\nvar DataTablesModule = /** @class */ (function () {\n    function DataTablesModule() {\n    }\n    DataTablesModule.forRoot = function () {\n        return {\n            ngModule: DataTablesModule\n        };\n    };\n    DataTablesModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: DataTablesModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    DataTablesModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.0.2\", ngImport: i0, type: DataTablesModule, declarations: [DataTableDirective], imports: [CommonModule], exports: [DataTableDirective] });\n    DataTablesModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: DataTablesModule, imports: [CommonModule] });\n    return DataTablesModule;\n}());\nexport { DataTablesModule };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: DataTablesModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [DataTableDirective],\n                    exports: [DataTableDirective]\n                }]\n        }] });\n//# sourceMappingURL=angular-datatables.module.js.map"],"names":["__spreadArray","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","DataTableDirective","el","vcr","renderer","this","dtOptions","ngOnInit","_this","dtTrigger","subscribe","options","displayTable","ngOnDestroy","unsubscribe","dt","destroy","dtInstance","Promise","resolve","reject","then","resolvedDTOptions","Object","keys","$","nativeElement","columns","forEach","col","_a","id","trim","getColumnUniqueId","setTimeout","rowCallback","row","data","index","applyNgPipeTransform","applyNgRefTemplate","assign","DataTable","filter","x","ngPipeInstance","ngTemplateRef","pipe","pipeArgs","ngPipeArgs","c","visible","findIndex","e","rowFromCol","childNodes","item","rowVal","text","rowValAfter","transform","apply","ref","context","cellFromIndex","html","_context","userData","adtData","instance","createEmbeddedView","appendChild","rootNodes","result","characters","randomIndex","Math","floor","random","charAt","i0","minVersion","version","ngImport","type","deps","token","ElementRef","ViewContainerRef","Renderer2","target","Directive","selector","inputs","decorators","args","ctorParameters","propDecorators","Input","DataTablesModule","forRoot","ngModule","NgModule","declarations","imports","CommonModule","exports"],"mappings":"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"}